<?xml version="1.0" encoding="utf-8"?><!DOCTYPE html><html lang="en" class="no-js"><head><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><title>Unity - Scripting API: AudioSource.PlayScheduled</title><meta name="description" content="Develop once, publish everywhere! Unity is the ultimate tool for video game development, architectural visualizations, and interactive media installations - publish to the web, Windows, OS X, Wii, Xbox 360, and iPhone with many more platforms to come." /><meta name="author" content="Unity Technologies" /><link rel="shortcut icon" href="../StaticFiles/images/favicons/favicon.ico" /><link rel="icon" type="image/png" href="../StaticFiles/images/favicons/favicon.png" /><link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFiles/images/favicons/apple-touch-icon-144x144.png" /><link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFiles/images/favicons/apple-touch-icon-114x114.png" /><link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFiles/images/favicons/apple-touch-icon-72x72.png" /><link rel="apple-touch-icon-precomposed" href="../StaticFiles/images/favicons/apple-touch-icon.png" /><script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-2854981-1']);
  _gaq.push(['_setDomainName', 'unity3d.com']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
  </script><script type="text/javascript" src="../StaticFiles/js/jquery.js">//jquery</script><script type="text/javascript" src="../StaticFiles/classList.js">//core</script><script type="text/javascript" src="../StaticFiles/js/core.js">//core</script><script type="text/javascript" src="../StaticFiles/js/suggest.js">//suggest</script><link rel="stylesheet" type="text/css" href="../StaticFiles/css/core.css" /><link rel="stylesheet" type="text/css" href="../StaticFiles/css/suggest.css" /><!--[if lte IE 8]><link rel="stylesheet" type="text/css" href="../StaticFiles/css/ie.css" /><![endif]--><!--[if lte IE 7]><link rel="stylesheet" type="text/css" href="../StaticFiles/css/ie7.css" /><![endif]--></head><body><div class="header-wrapper"><div id="header" class="header"><div class="content"><div class="logo"><a href="http://docs.unity3d.com" /></div><ul class="docs-menu"><li><a href="http://docs.unity3d.com">Overview</a></li><li><a href="../Manual/index.html">Manual</a></li><li><a href="../ScriptReference/index.html" class="selected">Scripting API</a></li></ul><div class="more-menu"><div class="box"><div class="label"><a href="http://unity3d.com/learn">Learn</a></div><ul style="display:none;"><li><a href="http://unity3d.com/learn/tutorials/modules">Tutorials</a></li><li><a href="http://unity3d.com/learn/live-training/">Live Training</a></li><li><a href="http://unity3d.com/learn/premium-support">Premium Support</a></li></ul></div><div class="box"><div class="label"><a href="http://unity3d.com/community">Community</a></div><ul style="display:none;"><li><a href="http://forum.unity3d.com/">Forums</a></li><li><a href="http://answers.unity3d.com/">Answers</a></li><li><a href="http://feedback.unity3d.com/">Feedback</a></li><li><a href="http://issuetracker.unity3d.com/">Issue Tracker</a></li></ul></div></div><div class="search"><form action="30_search.html" method="get" class="apisearch"><input type="text" name="q" placeholder="Search" autosave="Unity Reference" results="5" class="sbox field" id="q" /><input type="submit" class="submit" /></form></div></div></div><div class="toolbar"><div class="content"><div class="script-lang"><h4>Script language:</h4><ul><li class="selected" data-lang="JS">JS</li><li data-lang="CS">C#</li><li data-lang="Boo">Boo</li></ul><div id="script-lang-dialog" class="dialog hide"><div class="dialog-header clear"><h5>Script language</h5><div class="close"> </div></div><p>Select your preferred scripting language. All code snippets will be displayed in this language.</p></div></div></div><a class="suggest">Suggest a change</a></div></div><div id="master-wrapper" class="master-wrapper clear"><div id="sidebar" class="sidebar"><div class="sidebar-wrap"><div class="ruler-t"> </div><div class="ruler-m"> </div><div class="ruler-b"> </div><div class="content"><div class="sidebar-menu"><h2>Scripting API</h2><div class="toc"> </div></div><p><a href="40_history.html" class="cl">History</a></p></div></div></div><div id="content-wrap" class="content-wrap"><div class="content-block"><div class="content"><div class="section"><div class="mb20 clear"><h1 class="heading inherit left"><a href="AudioSource.html">AudioSource</a>.PlayScheduled</h1><a href="../Manual/class-AudioSource.html" class="switch-link gray-btn smallbtn mr0 right">Switch to Manual</a><div class="clear"> </div></div><div class="subsection"><div class="signature"><div class="signature-JS sig-block">public function <span class="sig-kw">PlayScheduled</span>(<span class="sig-kw">time</span>:
double):
        void;
       </div><div class="signature-CS sig-block">public void <span class="sig-kw">PlayScheduled</span>(double <span class="sigKW">time</span>);
     </div><div class="signature-Boo sig-block">public
      def <span class="sig-kw">PlayScheduled</span>(<span class="sig-kw">time</span> as double)
      
        as void </div></div></div><div class="subsection"><h2>Parameters</h2><table class="list"><tr><td class="name lbl">time</td><td class="desc">Time in seconds on the absolute time-line that AudioSettings.dspTime refers to for when the sound should start playing.</td></tr></table></div><div class="subsection"><h2>Description</h2><p>Plays the <a href="AudioSource-clip.html">clip</a> at a specific time on the absolute time-line that AudioSettings.dspTime reads from.</p></div><div class="subsection"><p>This is the preferred way to stitch AudioClips in music players because it is independent of the frame rate and gives the audio system enough time to prepare the playback of the sound to fetch it from media where the opening and buffering takes a lot of time (streams) without causing sudden CPU spikes.</p></div><div class="subsection">
      <pre class="codeExampleJS">// Basic demonstration of a music system that uses PlayScheduled to preload and sample-accurately stitch two AudioClips in an alternating fashion.
// The code assumes that the music pieces are each 16 bars (4 beats / bar) at a tempo of 140 beats per minute.
// To make it stitch arbitrary clips just replace the line
//   nextEventTime += (60.0 / bpm) * numBeatsPerSegment 
// by
//   nextEventTime += clips[flip].length;<p class="basic" />@script <a href="RequireComponent.html">RequireComponent</a>(<a href="AudioSource.html">AudioSource</a>)<p class="basic" />public var bpm = 140.0;
public var numBeatsPerSegment = 16;
public var clips = new <a href="AudioClip.html">AudioClip</a>[2];<p class="basic" />private var nextEventTime:double;
private var flip = 0;
private var audioSources = new <a href="AudioSource.html">AudioSource</a>[2];
private var running = false;<p class="basic" />function Start()
{
	for(var i = 0; i &lt; 2; i++)
	{
		var child:<a href="GameObject.html">GameObject</a> = new <a href="GameObject.html">GameObject</a>("Player");
		child.transform.parent = gameObject.transform;
		audioSources[i] = child.AddComponent("AudioSource");
	}
	nextEventTime = <a href="AudioSettings-dspTime.html">AudioSettings.dspTime</a> + 2.0;
	running = true;
}<p class="basic" />function Update()
{
	if(!running)
		return;
	var time = <a href="AudioSettings-dspTime.html">AudioSettings.dspTime</a>;
	if(time + 1.0 &gt; nextEventTime)
	{
		// We are now approx. 1 second before the time at which the sound should play, so we will schedule it now in order for the system to have enough time
		// to prepare the playback at the specified time. This may involve opening buffering a streamed file and should therefore take any worst-case delay into account.
		audioSources[flip].clip = clips[flip];
		audioSources[flip].PlayScheduled(nextEventTime);
		<a href="Debug.Log.html">Debug.Log</a>("Scheduled source " + flip + " to start at time " + nextEventTime);<p class="basic" />		// Place the next event 16 beats from here at a rate of 140 beats per minute
		nextEventTime += (60.0 / bpm) * numBeatsPerSegment;<p class="basic" />		// Flip between two audio sources so that the loading process of one does not interfere with the one that's playing out
		flip = 1 - flip;
	}
}
</pre>
      <pre class="codeExampleCS">using UnityEngine;
using System.Collections;

[<a href="RequireComponent.html">RequireComponent</a>(typeof(<a href="AudioSource.html">AudioSource</a>))]
public class ExampleClass : <a href="MonoBehaviour.html">MonoBehaviour</a> {
    public float bpm = 140.0F;
    public int numBeatsPerSegment = 16;
    public <a href="AudioClip.html">AudioClip</a>[] clips = new <a href="AudioClip.html">AudioClip</a>[2];
    private double nextEventTime;
    private int flip = 0;
    private <a href="AudioSource.html">AudioSource</a>[] audioSources = new <a href="AudioSource.html">AudioSource</a>[2];
    private bool running = false;
    void Start() {
        int i = 0;
        while (i &lt; 2) {
            <a href="GameObject.html">GameObject</a> child = new <a href="GameObject.html">GameObject</a>("Player");
            child.transform.parent = gameObject.transform;
            audioSources[i] = child.AddComponent("<a href="AudioSource.html">AudioSource</a>") as <a href="AudioSource.html">AudioSource</a>;
            i++;
        }
        nextEventTime = <a href="AudioSettings-dspTime.html">AudioSettings.dspTime</a> + 2.0F;
        running = true;
    }
    void Update() {
        if (!running)
            return;
        
        double time = <a href="AudioSettings-dspTime.html">AudioSettings.dspTime</a>;
        if (time + 1.0F &gt; nextEventTime) {
            audioSources[flip].clip = clips[flip];
            audioSources[flip].PlayScheduled(nextEventTime);
            <a href="Debug.Log.html">Debug.Log</a>("Scheduled source " + flip + " to start at time " + nextEventTime);
            nextEventTime += 60.0F / bpm * numBeatsPerSegment;
            flip = 1 - flip;
        }
    }
}
</pre>
      <pre class="codeExampleBoo">import UnityEngine
import System.Collections

[<a href="RequireComponent.html">RequireComponent</a>(typeof(<a href="AudioSource.html">AudioSource</a>))]
public class ExampleClass(<a href="MonoBehaviour.html">MonoBehaviour</a>):

	public bpm as float = 140.0F

	public numBeatsPerSegment as int = 16

	public clips as (<a href="AudioClip.html">AudioClip</a>) = array[of <a href="AudioClip.html">AudioClip</a>](2)

	private nextEventTime as double

	private flip as int = 0

	private audioSources as (<a href="AudioSource.html">AudioSource</a>) = array[of <a href="AudioSource.html">AudioSource</a>](2)

	private running as bool = false

	def Start() as void:
		i as int = 0
		while i &lt; 2:
			child as <a href="GameObject.html">GameObject</a> = <a href="GameObject.html">GameObject</a>('Player')
			child.transform.parent = gameObject.transform
			audioSources[i] = (child.AddComponent('<a href="AudioSource.html">AudioSource</a>') as <a href="AudioSource.html">AudioSource</a>)
			i++
		nextEventTime = (<a href="AudioSettings-dspTime.html">AudioSettings.dspTime</a> + 2.0F)
		running = true

	def Update() as void:
		if not running:
			return
		time as double = <a href="AudioSettings-dspTime.html">AudioSettings.dspTime</a>
		if (time + 1.0F) &gt; nextEventTime:
			audioSources[flip].clip = clips[flip]
			audioSources[flip].PlayScheduled(nextEventTime)
			<a href="Debug.Log.html">Debug.Log</a>(((('Scheduled source ' + flip) + ' to start at time ') + nextEventTime))
			nextEventTime += ((60.0F / bpm) * numBeatsPerSegment)
			flip = (1 - flip)

</pre>
    </div><div class="subsection"><p>The example at <a href="AudioSource.SetScheduledEndTime.html">AudioSource.SetScheduledEndTime</a> shows how you can play two audio clips without pops or clicks between the clips.  The approach is to have two AudioSources with clips attached, and queue up each clip using its AudioSource.<p class="basic" />See Also: <a href="AudioSource.SetScheduledStartTime.html">SetScheduledStartTime</a>.</p></div></div></div></div></div></div><div class="footer-wrapper"><div class="footer clear"><div class="copy">Copyright © 2014 Unity Technologies</div><div class="menu"><a href="http://unity3d.com/unity">Unity</a><a href="http://unity3d.com/gallery">Gallery</a><a href="http://unity3d.com/asset-store">Asset Store</a><a href="https://store.unity3d.com">Buy</a><a href="http://unity3d.com/unity/download">Download</a></div></div></div><div class="suggestform_background"><div class="suggestform"><div class="suggestline"><div class="suggestlabel">Your name (optional):</div></div><div class="suggestline"><input id="suggest_username" type="text" /></div><div class="suggestline"><div class="suggestlabel">Your email (optional):</div></div><div class="suggestline"><input id="suggest_useremail" type="text" /></div>
	Please write your suggestion here:
	<div class="suggestline"><textarea id="suggest_body"> </textarea></div><div class="suggestline"><button id="suggest_submit">Submit</button><button id="suggest_cancel">Cancel</button></div></div></div><script type="text/javascript">
suggest_form();
</script></body></html>