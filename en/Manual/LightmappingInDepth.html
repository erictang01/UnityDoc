<!DOCTYPE html><html lang="en" class="no-js">
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Unity - Manual: Lightmapping In-Depth</title>
<meta name="description" content="Develop once, publish everywhere! Unity is the ultimate tool for video game development, architectural visualizations, and interactive media installations - publish to the web, Windows, OS X, Wii, Xbox 360, and iPhone with many more platforms to come.">
<meta name="author" content="Unity Technologies">
<link rel="shortcut icon" href="../StaticFilesManual/images/favicons/favicon.ico">
<link rel="icon" type="image/png" href="../StaticFilesManual/images/favicons/favicon.png">
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="../StaticFilesManual/images/favicons/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../StaticFilesManual/images/favicons/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="../StaticFilesManual/images/favicons/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../StaticFilesManual/images/favicons/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="../StaticFilesManual/images/favicons/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon-precomposed" href="../StaticFilesManual/images/favicons/apple-touch-icon.png">
<meta name="msapplication-TileColor" content="#222c37">
<meta name="msapplication-TileImage" content="../StaticFilesManual/images/favicons/tileicon-144x144.png">
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-2854981-1']);
  _gaq.push(['_setDomainName', 'unity3d.com']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
  </script><script type="text/javascript" src="../StaticFilesManual/js/jquery.js"></script><script type="text/javascript" src="../StaticFilesManual/js/core.js"></script><script type="text/javascript" src="../StaticFilesManual/js/highlight.js"></script><script type="text/javascript" src="../StaticFilesManual/js/toc_en.js"></script><script>hljs.initHighlightingOnLoad();</script><link href="http://fonts.googleapis.com/css?family=Open+Sans:400,700,400italic" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="../StaticFilesManual/css/core.css">
</head>
<body>
<div class="header-wrapper">
<div id="header" class="header"><div class="content">
<div class="spacer"><div class="menu">
<div class="logo"><a href="http://docs.unity3d.com"></a></div>
<div class="search-form"><form action="30_search.html" method="get" class="apisearch">
<input type="text" name="q" placeholder="Search manual..." autosave="Unity Reference" results="5" class="sbox field" id="q"><input type="submit" class="submit">
</form></div>
<ul>
<li><a href="http://docs.unity3d.com">Overview</a></li>
<li><a href="../Manual/index.html" class="selected">Manual</a></li>
<li><a href="../ScriptReference/index.html">Scripting API</a></li>
</ul>
</div></div>
<div class="more">
<div class="filler"></div>
<ul><li><a href="http://unity3d.com/">unity3d.com</a></li></ul>
</div>
</div></div>
<div class="toolbar"><div class="content"><div class="lang-switcher">
<div class="current toggle" data-target=".lang-list">
<div class="lbl">Language: <span class="b">English</span>
</div>
<div class="arrow"></div>
</div>
<div class="lang-list" style="display:none;"><ul>
<li><a href="/Manual/LightmappingInDepth.html">English</a></li>
<li><a href="/es/current/Manual/LightmappingInDepth.html">Español</a></li>
<li><a href="/ru/current/Manual/LightmappingInDepth.html">Русский</a></li>
</ul></div>
</div></div></div>
</div>
<div id="master-wrapper" class="master-wrapper clear">
<div id="sidebar" class="sidebar"><div class="sidebar-wrap"><div class="content"><div class="sidebar-menu"><div class="toc"><h2>Unity Manual</h2></div></div></div></div></div>
<div id="content-wrap" class="content-wrap"><div class="content-block"><div class="content">
<div class="section">
<div class="breadcrumbs clear"><ul>
<li><a href="UnityManualRestructured.html">Unity Manual</a></li>
<li><a href="Graphics.html">Graphics</a></li>
<li><a href="GraphicsOverview.html">Graphics Overview</a></li>
<li><a href="LightingOverview.html">Lighting</a></li>
<li><a href="Lightmapping.html">Lightmapping Quickstart</a></li>
<li>Lightmapping In-Depth</li>
</ul></div>
<div class="mb20"><div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="Lightmapping.html"></a></span><div class="tip">Lightmapping Quickstart</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="LightmappingCustomSettings.html"></a></span><div class="tip">Custom Beast Settings</div>
</div>
</div></div>
<h1>Lightmapping In-Depth</h1>
  		        <div class="suggest">
                <a class="blue-btn sbtn">Suggest a change</a>
                <div class="suggest-wrap rel hide">
                  <div class="loading hide">
<div></div>
<div></div>
<div></div>
</div>
                  <div class="suggest-success hide">
                    <h2>Success!</h2>
                    <p>Thank you for helping us improve the quality of Unity Documentation. Although we cannot accept all submissions, we do read each suggested change from our users and will make updates where applicable.</p>
                    <a class="gray-btn sbtn close">Close</a>
                  </div>
                  <div class="suggest-failed hide">
                    <h2>Sumbission failed</h2>
                    <p>For some reason your suggested change could not be submitted. Please <a>try again</a> in a few minutes. And thank you for taking the time to help us improve the quality of Unity Documentation.</p>
                    <a class="gray-btn sbtn close">Close</a>
                  </div>
                  <div class="suggest-form clear">
                    <label for="suggest_name">Your name</label>
                    <input id="suggest_name" type="text">
                    <label for="suggest_email">Your email</label>
                    <input id="suggest_email" type="email">
                    <label for="suggest_body" class="clear">Suggestion <span class="r">*</span></label>
                    <textarea id="suggest_body" class="req"></textarea>
                    <button id="suggest_submit" class="blue-btn mr10">Submit suggestion</button>
                    <p class="mb0"><a class="cancel left lh42 cn">Cancel</a></p>
                  </div>
                </div>
              </div>
<!--BeginSwitchLink--><!--EndSwitchLink-->
<div class="clear"></div>

<p>If you are about to lightmap your first scene in Unity, this <a href="Lightmapping.html">Quickstart Guide</a> might help you out.</p>

<p>Lightmapping is fully integrated in Unity, so that you can build entire levels from within the Editor, lightmap them and have your materials automatically pick up the lightmaps without you having to worry about it. Lightmapping in Unity means that all your lights’ properties will be mapped directly to the Beast lightmapper and baked into textures for great performance. Unity Pro extends this functionality by Global Illumination, allowing for baking realistic and beautiful lighting, that would otherwise be impossible in realtime. Additionally Unity Pro brings you sky lights and emissive materials for even more interesting scene lighting.</p>

<p>In this page you will find a more in-depth description of all the attributes that you can find in the Lightmapping window. To open the Lightmapping window select <strong><span class="doc-menu">Window</span> – <span class="doc-menu">Lightmapping</span></strong>.</p>

<figure>
<img src="../uploads/Main/LightmappingMain.png" alt="">
<figcaption></figcaption></figure>

<p>At the top of the Lightmapping view are three <em>Scene Filter</em> buttons that enable you to apply the operation to all objects or to restrict it to lights or renderers.</p>

<h2>Object</h2>

<p>Per-object bake settings for lights, mesh renderers and terrains - depending on the current selection.</p>

<p>Use the <em>Scene Filter</em> buttons to easily view only the lights, renderers or terrains in the <span class="doc-keyword">Hierarchy</span>.</p>

<p><strong>Mesh Renderers and Terrains:</strong></p>

<table>
<colgroup>
<col style="text-align:left;">
<col style="text-align:left;">
</colgroup>

<thead>
<tr>
	<th style="text-align:left;"><strong><em>Property:</em></strong></th>
	<th style="text-align:left;"><strong><em>Function:</em></strong></th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;"><span class="doc-prop">Lightmap Static</span></td>
	<td style="text-align:left;">Mesh Renderers and Terrains have to be marked as static to be lightmapped.</td>
</tr>
<tr>
	<td style="text-align:left;"><span class="doc-prop">Scale In Lightmap</span></td>
	<td style="text-align:left;">(Mesh Renderers only) Bigger value will result in more resolution to be dedicated to the given mesh renderer. The final resolution will be proportional (Scale in lightmap) * (Object’s world-space surface area) * (Global bake settings Resolution value). A value of 0 will result in the object not being lightmapped (it will still affect other lightmapped objects).</td>
</tr>
<tr>
	<td style="text-align:left;"><span class="doc-prop">Lightmap Size</span></td>
	<td style="text-align:left;">(Terrains only) Lightmap size for this terrain instance. Terrains are not atlased as other objects - they get their individual lightmaps instead.</td>
</tr>
<tr>
	<td style="text-align:left;"><span class="doc-prop">Atlas</span></td>
	<td style="text-align:left;">Atlasing information – will be updated automatically if <span class="doc-keyword">Lock Atlas</span> is disabled. If <span class="doc-keyword">Lock Atlas</span> is enabled, those parameters won’t be modified automatically and can be edited manually.</td>
</tr>
<tr>
	<td style="text-align:left;">        <span class="doc-prop">Lightmap Index</span>
</td>
	<td style="text-align:left;">An index into the lightmap array.</td>
</tr>
<tr>
	<td style="text-align:left;">        <span class="doc-prop">Tiling</span>
</td>
	<td style="text-align:left;">(Mesh Renderers only) Tiling of object’s lightmap UVs.</td>
</tr>
<tr>
	<td style="text-align:left;">        <span class="doc-prop">Offset</span>
</td>
	<td style="text-align:left;">(Mesh Renderers only) Offset of object’s lightmap UVs.</td>
</tr>
</tbody>
</table>

<p><strong>Lights:</strong></p>

<table>
<colgroup>
<col style="text-align:left;">
<col style="text-align:left;">
</colgroup>

<thead>
<tr>
	<th style="text-align:left;"><strong><em>Property:</em></strong></th>
	<th style="text-align:left;"><strong><em>Function:</em></strong></th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;"><span class="doc-prop">Lightmapping</span></td>
	<td style="text-align:left;">The Lightmapping mode: Realtime Only, Auto or Baked Only. See Dual Lightmaps description below.</td>
</tr>
<tr>
	<td style="text-align:left;"><span class="doc-prop">Color</span></td>
	<td style="text-align:left;">The color of the light. Same property is used for realtime rendering.</td>
</tr>
<tr>
	<td style="text-align:left;"><span class="doc-prop">Intensity</span></td>
	<td style="text-align:left;">The intensity of the light. Same property is used for realtime rendering.</td>
</tr>
<tr>
	<td style="text-align:left;"><span class="doc-prop">Bounce Intensity</span></td>
	<td style="text-align:left;">A multiplier to the intensity of indirect light emitted from this particular light source.</td>
</tr>
<tr>
	<td style="text-align:left;"><span class="doc-prop">Baked Shadows</span></td>
	<td style="text-align:left;">Controls whether shadows are cast from objects lit by this light (controls realtime shadows at the same time in case of Auto lights).</td>
</tr>
<tr>
	<td style="text-align:left;">        <span class="doc-prop">Shadow Radius</span>
</td>
	<td style="text-align:left;">(Point and Spot lights only) Increase this value for soft direct shadows - it increases the size of the light for the shadowing (but not lighting) calculations.</td>
</tr>
<tr>
	<td style="text-align:left;">        <span class="doc-prop">Shadow Angle</span>
</td>
	<td style="text-align:left;">(Directional lights only) Increase this value for soft direct shadows - it increases the angular coverage of the light for the shadowing (but not lighting) calculations.</td>
</tr>
<tr>
	<td style="text-align:left;">        <span class="doc-prop">Shadow Samples</span>
</td>
	<td style="text-align:left;">If you’ve set Shadow Radius or Angle above zero, increase the number of Shadow Samples as well. Higher sample numbers remove noise from the shadow penumbra, but might increase rendering times.</td>
</tr>
</tbody>
</table>

<h2>Bake</h2>

<p>Global bake settings.</p>

<table>
<colgroup>
<col style="text-align:left;">
<col style="text-align:left;">
</colgroup>

<thead>
<tr>
	<th style="text-align:left;"><strong><em>Property:</em></strong></th>
	<th style="text-align:left;"><strong><em>Function:</em></strong></th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;"><span class="doc-prop">Mode</span></td>
	<td style="text-align:left;">Controls both offline lightmap baking and runtime lightmap rendering modes. In Dual Lightmaps mode both near and far lightmaps will be baked; only deferred rendering path supports rendering dual lightmaps. Single Lightmaps mode results in only the far lightmap being baked; can also be used to force single lightmaps mode for the deferred rendering path.</td>
</tr>
<tr>
	<td style="text-align:left;"><span class="doc-prop">Use in forward rendering</span></td>
	<td style="text-align:left;">(Dual lightmaps only) Enables dual lightmaps in forward rendering. Note that this will require you to create your own shaders for the purpose.</td>
</tr>
<tr>
	<td style="text-align:left;"><span class="doc-prop">Quality</span></td>
	<td style="text-align:left;">Presets for high (good-looking) and low (but fast) quality bakes. They affect the number of final gather rays, contrast threshold and some other final gather and anti-aliasing settings.</td>
</tr>
<tr>
	<td style="text-align:left;"><span class="doc-prop">Bounces</span></td>
	<td style="text-align:left;">The number of light bounces in the Global Illumination simulation. At least one bounce is needed to give a soft, realistic indirect lighting. 0 means only direct light will be computed.</td>
</tr>
<tr>
	<td style="text-align:left;"><span class="doc-prop">Sky Light Color</span></td>
	<td style="text-align:left;">Sky light simulates light emitted from the sky from all the directions - great for outdoor scenes.</td>
</tr>
<tr>
	<td style="text-align:left;"><span class="doc-prop">Sky Light Intensity</span></td>
	<td style="text-align:left;">The intensity of the sky light - a value of 0 disables the sky light.</td>
</tr>
<tr>
	<td style="text-align:left;"><span class="doc-prop">Bounce Boost</span></td>
	<td style="text-align:left;">Allows to exaggerate light bouncing in dark scenes. If a scene is authored with dark materials, it’s easy to compensate with strong direct lighting. Indirect lighting will be very subtle though, as the bounced light will fade out quickly. Setting bounce boost to a value larger than 1 will compensate for this by pushing the albedo color towards 1 for GI computations. Note that values between 0 and 1 will decrease the light bounce. The actual computation taking place is a per component <code>pow(colorComponent, (1.0/bounceBoost))</code>.</td>
</tr>
<tr>
	<td style="text-align:left;"><span class="doc-prop">Bounce Intensity</span></td>
	<td style="text-align:left;">A multiplier to the intensity of the indirect light.</td>
</tr>
<tr>
	<td style="text-align:left;"><span class="doc-prop">Final Gather Rays</span></td>
	<td style="text-align:left;">The number of rays shot from every final gather point - higher values give better quality.</td>
</tr>
<tr>
	<td style="text-align:left;"><span class="doc-prop">Contrast Threshold</span></td>
	<td style="text-align:left;">The threshold above which new final gather points will be created by the adaptive sampling algorithm. Higher values make Beast be more tolerant about illumination changes on the surface, thus producing smoother but less-detailed lightmaps. A low number of final gather rays gives noise, which is local contrast. It might need higher contrast threshold values not to force additional final gather points to be created.</td>
</tr>
<tr>
	<td style="text-align:left;"><span class="doc-prop">Interpolation</span></td>
	<td style="text-align:left;">Controls the way the color from final gather points will be interpolated. 0 for linear interpolation, 1 for advanced, gradient-based interpolation. In some cases the latter might introduce artifacts.</td>
</tr>
<tr>
	<td style="text-align:left;"><span class="doc-prop">Interpolation Points</span></td>
	<td style="text-align:left;">The number of final gather points to interpolate between. Higher values give more smooth results, but can also smooth out details in the lighting.</td>
</tr>
<tr>
	<td style="text-align:left;"><span class="doc-prop">Ambient Occlusion</span></td>
	<td style="text-align:left;">The amount of ambient occlusion to be baked into the lightmaps. Ambient occlusion is the visibility function integrated over the local hemisphere of size Max Distance, so doesn’t take into account any lighting information.</td>
</tr>
<tr>
	<td style="text-align:left;"><span class="doc-prop">Lock Atlas</span></td>
	<td style="text-align:left;">When Lock Atlas is enabled, automatic atlasing won’t be run and lightmap index, tiling and offset on the objects won’t be modified.</td>
</tr>
<tr>
	<td style="text-align:left;"><span class="doc-prop">Resolution</span></td>
	<td style="text-align:left;">The resolution of the lightmaps in texels per world unit. A value of 50 and a 10x10 unit plane will result in the plane occupying 500x500 texels in the lightmap.</td>
</tr>
<tr>
	<td style="text-align:left;"><span class="doc-prop">Padding</span></td>
	<td style="text-align:left;">The space between individual objects in the atlas, given in texels.</td>
</tr>
</tbody>
</table>

<h2>Maps</h2>

<p>The editable array of all the lightmaps.</p>

<table>
<colgroup>
<col style="text-align:left;">
<col style="text-align:left;">
</colgroup>

<thead>
<tr>
	<th style="text-align:left;"><strong><em>Property:</em></strong></th>
	<th style="text-align:left;"><strong><em>Function:</em></strong></th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;"><span class="doc-prop">Compressed</span></td>
	<td style="text-align:left;">Toggles compression on all lightmap assets for this scene.</td>
</tr>
<tr>
	<td style="text-align:left;"><span class="doc-prop">Array Size</span></td>
	<td style="text-align:left;">Size of the lightmaps array (0 to 254).</td>
</tr>
<tr>
	<td style="text-align:left;"><span class="doc-prop">Lightmaps Array</span></td>
	<td style="text-align:left;">The editable array of all the lightmaps in the current scene. Unassigned slots are treated as black lightmaps. Indices correspond to the Lightmap Index value on Mesh Renderers and Terrains. Unless Lock Atlas is enabled, this array will get auto-resized and populated whenever you bake lightmaps.</td>
</tr>
</tbody>
</table>

<h2>Lightmap Display</h2>

<p>Utilities for controlling how lightmaps are displayed in the editor. Lightmap Display is a sub window of the Scene View, visible whenever the Lightmapping window is visible.</p>

<table>
<colgroup>
<col style="text-align:left;">
<col style="text-align:left;">
</colgroup>

<thead>
<tr>
	<th style="text-align:left;"><strong><em>Property:</em></strong></th>
	<th style="text-align:left;"><strong><em>Function:</em></strong></th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:left;"><span class="doc-prop">Use Lightmaps</span></td>
	<td style="text-align:left;">Whether to use the lightmaps during the rendering or not.</td>
</tr>
<tr>
	<td style="text-align:left;"><span class="doc-prop">Shadow Distance</span></td>
	<td style="text-align:left;">The distance at which objects stop receiving shadows. In the Dual Lightmaps mode it controls the end of the fade from Near to Far lightmaps. This setting overrides, but not overwrites, the QualitySettings.shadowDistance setting.</td>
</tr>
<tr>
	<td style="text-align:left;"><span class="doc-prop">Show Resolution</span></td>
	<td style="text-align:left;">Toggles the scene view Lightmap Resolution mode, which allows you to preview how you spend your lightmap texels on objects marked as static.</td>
</tr>
</tbody>
</table>

<h2>Details</h2>

<h3>Dual Lightmaps</h3>

<p>Dual lightmaps is Unity’s approach to make lightmapping work with <strong>specular</strong>, <strong>normal mapping</strong> and proper blending of baked and realtime shadows. It’s also a way to make your lightmaps look good even if the lightmap resolution is low.</p>

<p>Dual lightmaps by default can only be used in the <a href="RenderingPaths.html">Deferred Lighting</a> rendering path. In Forward rendering path, it’s possible to enable Dual Lightmaps by writing custom shaders (use the <a href="SL-SurfaceShaders.html">dualforward</a> surface shader directive).</p>

<p>Dual lightmaps use two sets of lightmaps: </p>

<ul>
<li>
<strong>Far</strong>: contains full illumination.</li>
<li>
<strong>Near</strong>: contains indirect illumination from lights marked as <strong>Auto</strong>, full illumination from lights marked as <strong>Baked Only</strong>, emissive materials and sky lights.</li>
</ul>

<p>
<strong>Realtime Only</strong> lights are never baked. The <strong>Near</strong> lightmap set is used within the distance from the camera smaller than the Shadow Distance quality setting.
Within this distance <strong>Auto</strong> lights are rendered as realtime lights with specular, bump and realtime shadows (this makes their shadows blend correctly with shadows from Realtime Only lights) and their indirect light is taken from the lightmap. Outside Shadow Distance <strong>Auto</strong> lights no longer render in realtime and full illumination is taken from the <strong>Far</strong> lightmap (<strong>Realtime Only</strong> lights are still there, but without the shadows).</p>

<p>The scene below is baked and rendered in the Dual Lightmaps mode. It contains one directional light with the lightmapping mode set to the default Auto, a number of static lightmapped objects (buildings, obstacles, immovable details) and some dynamic moving or movable objects (dummies with guns, barrels). Within the Shadow Distance the dummy, the static lightmapped buildings and the ground are lit in realtime and cast realtime shadows, whereas the soft indirect light comes from the near lightmap. Past the Shadow Distance the buildings are fully lit only with the lightmaps, while the two dummies are dynamically lit, but don’t cast shadows anymore.</p>

<figure>
<img src="../uploads/Main/DualLightmapsInAction.png" alt="">
<figcaption></figcaption></figure>

<figure>
<img src="../uploads/Main/DualLightmapsInActionDetail.png" alt="">
<figcaption></figcaption></figure>

<h3>Directional Lightmaps</h3>

<p>Dual lightmaps allow for specular lighting and normal mapping, but only within shadow distance and in direct light. If you need these effects in areas lit mostly by indirect light or far away from the camera, or if you want to avoid the cost of rendering realtime lights necessary for dual lightmaps, you should use directional lightmaps instead.</p>

<p>Directional lightmaps store information on light directionality in a second set of lightmaps. The first set of lightmaps (color) stores just the diffuse lighting, same as Single Lightmaps do. The second set of lightmaps (scale) stores the ratio of the desaturated incoming light per basis vector.</p>

<p>Advantages:</p>

<ul>
<li>Allows for normal mapping and specular without realtime lights.</li>
<li>Gives specular for indirect lighting, important in areas that are mostly in shadow, e.g. caves.</li>
<li>The ﬁrst lightmap (color) is the same as the one in Single Lightmaps mode.

<ul>
<li>If an object doesn’t need normal mapping nor specular, the second lightmap is not sampled.</li>
</ul>
</li>
</ul>

<p>Disadvantages:</p>

<ul>
<li>The encoding is lossy, so when direct lighting from more than one light affects a certain area, the lighting from directional lightmaps might look differently than realtime lighting.</li>
<li>The scale lightmap does not compress very well.

<ul>
<li>Not a problem on ﬂat areas.</li>
<li>Artifacts can be hidden by albedo textures.</li>
</ul>
</li>
</ul>

<p>Realtime lighting typically handles one light per pass. Directional lightmaps, on the other hand, handle an arbitrary amount of lights in one pass, as long as they are baked.</p>

<p>The decoding of directional lightmaps is done in a space relative to tangent space. This space is defined by a basis consisting of three pairwise orthogonal vectors, which evenly cover the hemisphere in the direction of the surface normal.</p>

<p>The three coefficients from the scale lightmap are combined depending on the normal from the normal map. This operation is done in the shader at runtime, so normal maps can be dynamically changed, if needed.
The normal from the normal map is transformed into the directional lightmaps basis. It is then used to combine the three coefficients from the scale lightmap, with respect to each of the basis vectors, into a final scaling value that is applied to the color lightmap.</p>

<p>The scale lightmap can be interpreted as the amount of light coming from each of the basis directions that contributed to the value stored in the color lightmap. The coefficients linearly combined with the basis vectors give a general light direction that can be used for specular calculations.</p>

<figure>
<img src="../uploads/Main/DirectionalLightmapsStealthBus.png" alt="The Stealth tutorial project uses directional lightmaps to show great surface detail even in the shadow.">
<figcaption>The <a href="http://unity3d.com/learn/tutorials/projects/stealth">Stealth tutorial project</a> uses directional lightmaps to show great surface detail even in the shadow.</figcaption></figure>

<h3>Single Lightmaps</h3>

<p>Single Lightmaps is a much simpler technique, but it can be used in any <a href="RenderingPaths.html">rendering path</a>. All static illumination (i.e. from baked only and auto lights, sky lights and emissive materials) gets baked into one set of lightmaps. These lightmaps are used on all lightmapped objects regardless of shadow distance.</p>

<p>To match the strength of dynamic shadows to baked shadows, you need to manually adjust the <span class="doc-prop">Shadow Strength</span> property of your light:</p>

<figure>
<img src="../uploads/Main/SingleLightmapsShadow2.png" alt="Adjusting Shadow Strength of a light from the original value of 1.0 to 0.7.">
<figcaption>Adjusting Shadow Strength of a light from the original value of 1.0 to 0.7.</figcaption></figure>

<h3>Lightmapped Materials</h3>

<p>Unity doesn’t require you to select special materials to use lightmaps. Any built-in shader and any Surface Shader you write already supports lightmaps out of the box, without you having to worry about it.</p>

<h3>Lightmap Resolution</h3>

<p>With the <em>Resolution</em> bake setting you control how many texels per unit are needed for your scene to look good. If there’s a 1x1 unit plane in your scene and the resolution is set to 10 texels per unit, your plane will take up 10x10 texels in the lightmap. The Resolution bake setting is a global setting. If you want to modify it for a special object (make it very small or very big in the lightmap) you can use the <span class="doc-prop">Scale in Lightmap</span> property of a Mesh Renderer. Setting Scale in Lightmap to 0 will result in the object not being lightmapped at all (it will still influence lightmaps on other objects). Use the <em>Lightmap Resolution</em> scene view render mode to preview how you spend your lightmap texels.</p>

<figure>
<img src="../uploads/Main/LightmapResolution40.png" alt="Lightmap Resolution scene view mode visualising how the lightmap texels are spent (each square is one texel).">
<figcaption>Lightmap Resolution scene view mode visualising how the lightmap texels are spent (each square is one texel).</figcaption></figure>

<h3>UVs</h3>

<p>A mesh that you’re about to lightmap needs to have UVs suitable for lightmapping. The easiest way to ensure that is to enable the <em>Generate Lightmap UVs</em> option in Mesh Import Settings for a given mesh.</p>

<p>For more information see the <a href="LightmappingUV.html">Lightmap UVs</a> page.</p>

<h3>Material Properties</h3>

<p>The following material properties are mapped to Beast’s internal scene representation:</p>

<ul>
<li>Color</li>
<li>Main Texture</li>
<li>Specular Color</li>
<li>Shininess</li>
<li>Transparency

<ul>
<li>Alpha-based: when using a transparent shader, main texture’s alpha channel will control the transparency</li>
<li>Color-based: Beast’s RGB transparency can be enabled by adding a texture property called <span class="doc-keyword">_TransparencyLM</span> to the shader. Bear in mind that this transparency is defined in the opposite way compared to the alpha-based transparency: here a pixel with value (1, 0, 0) will be fully transparent to red light component and fully opaque to green and blue component, which will result in a red shadow; for the same reason white texture will be fully transparent, while black texture - fully opaque.</li>
</ul>
</li>
<li>Emission

<ul>
<li>Self Illuminated materials will emit light tinted by the Color and Main Texture and masked by the Illum texture. The intensity of emitted light is proportional to the Emission property (0 disables emission).</li>
<li>Generally large and dim light sources can be modeled as objects with emissive materials. For small and intense lights normal light types should be used, since emissive materials might introduce noise in the output.</li>
</ul>
</li>
</ul>

<p><em>Note: When mapping materials to Beast, Unity detects the ‘kind’ of the shader by the shader’s properties and path/name keywords such as: ‘Specular’, ‘Transparent’, ‘Self-Illumin’, etc.</em></p>

<h3>Skinned Mesh Renderers</h3>

<p>Having skinned meshes that are static makes your content more flexible, since the shape of those meshes can be changed in Unity after import and can be tweaked per level. Skinned Mesh Renderers can be lightmapped in exactly the same way as Mesh Renderers and are sent to the lightmapper in their current pose.</p>

<p>Lightmapping can also be used if the vertices of a mesh are moved at runtime a bit – the lighting won’t be completely accurate, but in a lot of cases it will match well enough.</p>

<h2>Advanced</h2>

<h3>Automatic Atlasing</h3>

<p>Atlasing (UV-packing) is performed automatically every time you perform a bake and normally you don’t have to worry about it – it just works.</p>

<p>Object’s world-space surface area is multiplied by the per-object Scale In Lightmap value and by the global Resolution and the result determines the size of the object’s UV set (more precisely: the size of the [0,1]x[0,1] UV square) in the lightmap. Next, all objects are packed into as few lightmaps as possible, while making sure each of them occupies the amount of space calculated in the previous step. If a UV set for a given object occupies only a part of the [0,1]x[0,1] square, in many cases atlasing will move neighboring UV sets closer, to make use of the empty space.</p>

<p>As a result of atlasing, every object to be lightmapped has it’s place in one of the lightmaps and that space doesn’t overlap with any other object’s space. The atlasing information is stored as three values: Lightmap Index, Tiling (scale) and Offset in Mesh Renderers and as one value: Lightmap Index in Terrains and can be viewed and modified via the Object pane of the lightmapping window.</p>

<figure>
<img src="../uploads/Main/LightmapUsers40.png" alt="The lightmap of the active object from the current selection is highlighted in yellow. Additionally, right-clicking a lightmap and choosing Select Lightmap Users lets you select all game objects that use that lightmap.">
<figcaption>The lightmap of the active object from the current selection is highlighted in yellow. Additionally, right-clicking a lightmap and choosing Select Lightmap Users lets you select all game objects that use that lightmap.</figcaption></figure>

<p>Atlasing can only modify per-object data which is Lightmap Index, Tiling and Offset and can not modify the UV set of an object, as the UV set is stored as part of the shared mesh. Lightmap UVs for a mesh can only be created at import time using Unity’s built-in auto-unwrapper or in an external 3D package before importing into Unity.</p>

<h3>Lock Atlas</h3>

<p>When Lock Atlas is enabled, automatic atlasing won’t be run and Lightmap Index, Tiling and Offset on the objects won’t be modified. Beast will rely on whatever is the current atlasing, so it’s the user’s responsibility to maintain correct atlasing (e.g. no overlapping objects in the lightmaps, no objects referencing a lightmap slot past the lightmap array end, etc.).</p>

<p>Lock Atlas opens up the possibility for alternative workflows when sending your object’s for lightmapping. You can then perform atlasing manually or via scripting to fit you specific needs; you can also lock the automatically generated atlasing if you are happy with the current atlasing, have baked more sets of lightmaps for your scene and want to make sure, that after adding one more object to the scene the atlasing won’t change making the scene incompatible with other lightmap sets.</p>

<p>Remember that Lock Atlas locks only atlasing, not the mesh UVs. If you change your source mesh and the mesh importer is set to generate lightmap UVs, the UVs might be generated differently and your current lightmap will look incorrectly on the object - to fix this you will need to re-bake the lightmap.</p>

<h3>Custom Beast bake settings</h3>

<p>If you need even more control over the bake process, see the <a href="LightmappingCustomSettings.html">custom Beast settings</a> page.</p>
<div class="nextprev clear">
<div class="icon tt left mr1" data-distance="-40|-30|top">
<span class="prev"><a href="Lightmapping.html"></a></span><div class="tip">Lightmapping Quickstart</div>
</div>
<div class="icon tt right" data-distance="-40|-30|top">
<span class="next"><a href="LightmappingCustomSettings.html"></a></span><div class="tip">Custom Beast Settings</div>
</div>
</div>
</div>
<div class="footer-wrapper"><div class="footer clear">
<div class="copy">Copyright © 2014 Unity Technologies</div>
<div class="menu">
<a href="http://unity3d.com/learn">Learn</a><a href="http://unity3d.com/community">Community</a><a href="http://unity3d.com/asset-store">Asset Store</a><a href="https://store.unity3d.com">Buy</a><a href="http://unity3d.com/unity/download">Download</a>
</div>
</div></div>
</div></div></div>
</div>
</body>
</html>
